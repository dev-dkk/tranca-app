{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/santo/OneDrive/%C3%81rea%20de%20Trabalho/Afrobraids%20Software/Aplica%C3%A7%C3%A3o/sistema-trancas/frontend/app/admin-agenda/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { format } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale';\r\n\r\nexport default function AdminAgenda() {\r\n  const router = useRouter();\r\n  const [appointments, setAppointments] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // VerificaÃ§Ã£o de SeguranÃ§a (SÃ³ Admin entra)\r\n    const userStored = localStorage.getItem('user');\r\n    if (!userStored) { router.push('/login'); return; }\r\n    \r\n    const user = JSON.parse(userStored);\r\n    if (user.role !== 'ADMIN') {\r\n        alert(\"Acesso restrito a administradores.\");\r\n        router.push('/');\r\n        return;\r\n    }\r\n\r\n    fetch('http://localhost:3001/appointments/admin/all')\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (Array.isArray(data)) setAppointments(data);\r\n        })\r\n        .finally(() => setLoading(false));\r\n  }, [router]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-6\">\r\n        <div className=\"max-w-6xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden\">\r\n            <div className=\"bg-beleza-900 p-6 flex justify-between items-center text-white\">\r\n                <h1 className=\"text-2xl font-bold\">ðŸ“… Agenda de Clientes</h1>\r\n                <button onClick={() => router.push('/')} className=\"text-sm text-beleza-200 hover:text-white\">Voltar para Home</button>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                        <tr>\r\n                            <th className=\"p-4 font-bold text-gray-600\">Data e Hora</th>\r\n                            <th className=\"p-4 font-bold text-gray-600\">Cliente</th>\r\n                            <th className=\"p-4 font-bold text-gray-600\">Contato</th>\r\n                            <th className=\"p-4 font-bold text-gray-600\">ServiÃ§o</th>\r\n                            <th className=\"p-4 font-bold text-gray-600\">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-gray-100\">\r\n                        {loading ? (\r\n                            <tr><td colSpan={5} className=\"p-4 text-center\">Carregando...</td></tr>\r\n                        ) : appointments.map((app) => (\r\n                            <tr key={app.id} className=\"hover:bg-gray-50 transition\">\r\n                                <td className=\"p-4 text-gray-800 font-medium\">\r\n                                    {format(new Date(app.start_time), \"dd/MM/yyyy HH:mm\")}\r\n                                </td>\r\n                                <td className=\"p-4\">\r\n                                    <div className=\"font-bold text-beleza-900\">{app.users?.name}</div>\r\n                                    <div className=\"text-xs text-gray-400\">CPF: {app.users?.cpf}</div>\r\n                                </td>\r\n                                <td className=\"p-4 text-blue-600\">\r\n                                    <a href={`https://wa.me/55${app.users?.phone?.replace(/\\D/g, '')}`} target=\"_blank\" rel=\"noreferrer\" className=\"flex items-center gap-1 hover:underline\">\r\n                                        ðŸ“± {app.users?.phone}\r\n                                    </a>\r\n                                </td>\r\n                                <td className=\"p-4 text-gray-600\">{app.services?.name}</td>\r\n                                <td className=\"p-4\">\r\n                                    <span className={`px-2 py-1 rounded text-xs font-bold ${\r\n                                        app.status === 'CONFIRMED' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                                    }`}>\r\n                                        {app.status}\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n                {!loading && appointments.length === 0 && (\r\n                    <div className=\"p-8 text-center text-gray-500\">Nenhum agendamento encontrado.</div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,2JAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,6NAAQ,EAAQ,EAAE;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IAEvC,IAAA,8NAAS,EAAC;QACR,4CAA4C;QAC5C,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,CAAC,YAAY;YAAE,OAAO,IAAI,CAAC;YAAW;QAAQ;QAElD,MAAM,OAAO,KAAK,KAAK,CAAC;QACxB,IAAI,KAAK,IAAI,KAAK,SAAS;YACvB,MAAM;YACN,OAAO,IAAI,CAAC;YACZ;QACJ;QAEA,MAAM,gDACD,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACF,IAAI,MAAM,OAAO,CAAC,OAAO,gBAAgB;QAC7C,GACC,OAAO,CAAC,IAAM,WAAW;IAChC,GAAG;QAAC;KAAO;IAEX,qBACE,0PAAC;QAAI,WAAU;kBACX,cAAA,0PAAC;YAAI,WAAU;;8BACX,0PAAC;oBAAI,WAAU;;sCACX,0PAAC;4BAAG,WAAU;sCAAqB;;;;;;sCACnC,0PAAC;4BAAO,SAAS,IAAM,OAAO,IAAI,CAAC;4BAAM,WAAU;sCAA2C;;;;;;;;;;;;8BAGlG,0PAAC;oBAAI,WAAU;;sCACX,0PAAC;4BAAM,WAAU;;8CACb,0PAAC;oCAAM,WAAU;8CACb,cAAA,0PAAC;;0DACG,0PAAC;gDAAG,WAAU;0DAA8B;;;;;;0DAC5C,0PAAC;gDAAG,WAAU;0DAA8B;;;;;;0DAC5C,0PAAC;gDAAG,WAAU;0DAA8B;;;;;;0DAC5C,0PAAC;gDAAG,WAAU;0DAA8B;;;;;;0DAC5C,0PAAC;gDAAG,WAAU;0DAA8B;;;;;;;;;;;;;;;;;8CAGpD,0PAAC;oCAAM,WAAU;8CACZ,wBACG,0PAAC;kDAAG,cAAA,0PAAC;4CAAG,SAAS;4CAAG,WAAU;sDAAkB;;;;;;;;;;+CAChD,aAAa,GAAG,CAAC,CAAC,oBAClB,0PAAC;4CAAgB,WAAU;;8DACvB,0PAAC;oDAAG,WAAU;8DACT,IAAA,+JAAM,EAAC,IAAI,KAAK,IAAI,UAAU,GAAG;;;;;;8DAEtC,0PAAC;oDAAG,WAAU;;sEACV,0PAAC;4DAAI,WAAU;sEAA6B,IAAI,KAAK,EAAE;;;;;;sEACvD,0PAAC;4DAAI,WAAU;;gEAAwB;gEAAM,IAAI,KAAK,EAAE;;;;;;;;;;;;;8DAE5D,0PAAC;oDAAG,WAAU;8DACV,cAAA,0PAAC;wDAAE,MAAM,CAAC,gBAAgB,EAAE,IAAI,KAAK,EAAE,OAAO,QAAQ,OAAO,KAAK;wDAAE,QAAO;wDAAS,KAAI;wDAAa,WAAU;;4DAA0C;4DACjJ,IAAI,KAAK,EAAE;;;;;;;;;;;;8DAGvB,0PAAC;oDAAG,WAAU;8DAAqB,IAAI,QAAQ,EAAE;;;;;;8DACjD,0PAAC;oDAAG,WAAU;8DACV,cAAA,0PAAC;wDAAK,WAAW,CAAC,oCAAoC,EAClD,IAAI,MAAM,KAAK,cAAc,gCAAgC,2BAC/D;kEACG,IAAI,MAAM;;;;;;;;;;;;2CAlBd,IAAI,EAAE;;;;;;;;;;;;;;;;wBAyB1B,CAAC,WAAW,aAAa,MAAM,KAAK,mBACjC,0PAAC;4BAAI,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;;;;;;AAMnE"}}]
}